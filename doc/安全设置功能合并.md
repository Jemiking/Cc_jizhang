# 安全设置功能合并

## 功能概述

为了优化用户体验，将CC记账应用中的"安全设置"功能进行整合，统一SecuritySettingsScreen和EnhancedSecuritySettingsScreen的实现，实现以下目标：

1. **简化导航结构**：减少设置页面中的菜单项，将相关功能整合到一起
2. **统一安全管理**：在同一界面中管理数据库加密和访问控制
3. **增强用户体验**：减少操作步骤，提高功能可发现性
4. **保留现有功能**：确保所有现有功能在新界面中可用

## 实现细节

### 1. 界面整合

- 创建统一的"安全设置"页面，包含以下功能区域：
  - 安全评分区（显示当前安全状态和评分）
  - 数据库加密设置区（启用/禁用、密码重置）
  - 访问控制设置区（启用/禁用、角色管理）
  - 家庭成员管理区（角色分配、权限管理）
  - 安全建议区（显示安全改进建议）

### 2. 代码结构调整

- 创建统一的`UnifiedSecurityViewModel`，整合现有的`SecuritySettingsViewModel`和`EnhancedSecuritySettingsViewModel`
- 创建新的`UnifiedSecurityScreen`组件，替代现有的`SecuritySettingsScreen`和`EnhancedSecuritySettingsScreen`
- 更新导航结构，保留`SecuritySettings`路由指向新的统一界面

### 3. 功能增强

- **安全评分系统**：
  - 添加安全评分计算逻辑
  - 提供安全状态可视化展示
  - 生成安全改进建议

- **数据库加密增强**：
  - 显示加密类型和强度信息
  - 提供密码重置功能
  - 显示上次密码更改时间

- **访问控制增强**：
  - 简化角色管理界面
  - 提供更直观的权限设置
  - 添加家庭成员状态显示

## 实现步骤 ✅

### 步骤1：创建统一的ViewModel ✅

- ✅ 合并`SecuritySettingsViewModel`和`EnhancedSecuritySettingsViewModel`的功能
- ✅ 保持现有的数据结构和方法，但整合到一个类中
- ✅ 添加新的安全评分和建议功能

### 步骤2：创建统一的UI界面 ✅

- ✅ 基于现有的`SecuritySettingsScreen`和`EnhancedSecuritySettingsScreen`
- ✅ 使用卡片布局组织不同功能区域
- ✅ 保持一致的设计风格

### 步骤3：更新导航结构 ✅

- ✅ 更新导航图和路由定义
- ✅ 创建包装组件WrappedUnifiedSecurityScreen

### 步骤4：功能迁移 ✅

- ✅ 确保所有现有功能在新界面中可用
- ✅ 优化用户体验，减少操作步骤
- ✅ 添加新的整合功能

## 使用方法

### 管理数据库加密

1. 进入"设置"页面
2. 点击"安全设置"
3. 在数据库加密区域启用或禁用加密
4. 如需重置密码，点击"重置加密密码"按钮

### 管理访问控制

1. 进入"设置"页面
2. 点击"安全设置"
3. 在访问控制区域启用或禁用访问控制
4. 在家庭成员管理区域调整成员角色和权限

### 查看安全建议

1. 进入"设置"页面
2. 点击"安全设置"
3. 查看安全评分和建议区域
4. 根据建议改进安全设置

## 注意事项

- 合并功能后，原有的安全设置将自动迁移到新界面
- 数据库加密状态和访问控制设置将保持不变
- 建议用户在更新后检查安全设置，确保配置正确
