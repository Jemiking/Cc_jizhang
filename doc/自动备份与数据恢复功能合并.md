# 自动备份与数据恢复功能合并

## 功能概述

为了优化用户体验，将CC记账应用中的"自动备份设置"与"数据备份与恢复"功能合并到一个统一的界面中，实现以下目标：

1. **简化导航结构**：减少设置页面中的菜单项，将相关功能整合到一起
2. **统一备份管理**：在同一界面中管理自动备份和手动备份
3. **增强用户体验**：减少操作步骤，提高功能可发现性
4. **保留现有功能**：确保所有现有功能在新界面中可用

## 实现细节

### 1. 界面整合

- 创建统一的"数据备份与恢复"页面，包含以下功能区域：
  - 快速操作区（手动备份、恢复数据）
  - 自动备份设置区（启用/禁用、频率设置、路径设置）
  - 备份文件管理区（文件列表、查看、删除、恢复操作）
  - 高级备份选项区（WebDAV同步、CSV导入导出、应用间迁移）

### 2. 代码结构调整

- 创建统一的`UnifiedBackupViewModel`，整合现有的`AutoBackupViewModel`和`DataExportImportViewModel`
- 创建新的`UnifiedBackupScreen`组件，替代现有的`AutoBackupSettingScreen`和`DataBackupScreen`
- 更新导航结构，移除`AutoBackupSetting`路由，保留`DataBackup`路由指向新的统一界面

### 3. 功能增强

- **备份文件统一管理**：
  - 统一备份文件的存储位置和命名规则
  - 区分自动备份和手动备份，但在同一界面中显示
  - 为每个备份文件添加类型标签（自动/手动）

- **备份路径设置优化**：
  - 保留文件选择器功能
  - 添加常用路径快捷选择
  - 显示当前路径的可用空间
  - 添加路径有效性检查

- **备份文件交互增强**：
  - 支持点击查看备份内容
  - 添加备份文件分享功能
  - 支持备份文件重命名
  - 添加备份文件搜索和筛选

## 实现步骤

### 步骤1：创建统一的ViewModel ✅

- ✅ 合并`AutoBackupViewModel`和`DataExportImportViewModel`的功能
- ✅ 保持现有的数据结构和方法，但整合到一个类中

### 步骤2：创建统一的UI界面 ✅

- ✅ 基于现有的`DataBackupScreen`和`AutoBackupSettingScreen`
- ✅ 使用Tab布局或可折叠面板组织不同功能区域
- ✅ 保持一致的设计风格

### 步骤3：更新导航结构 ✅

- ✅ 修改`SettingsScreen`中的菜单项
- ✅ 更新导航图和路由定义

### 步骤4：数据模型调整 ✅

- ✅ 统一备份文件的元数据结构
- ✅ 添加备份类型标识（自动/手动）
- ✅ 保持向后兼容性，确保现有备份文件仍然可用

### 步骤5：功能迁移 ✅

- ✅ 确保所有现有功能在新界面中可用
- ✅ 优化用户体验，减少操作步骤
- ✅ 添加新的整合功能

## 使用方法

### 备份数据

1. 进入"设置"页面
2. 点击"数据备份与恢复"
3. 在快速操作区点击"立即备份"，或配置自动备份

### 恢复数据

1. 进入"设置"页面
2. 点击"数据备份与恢复"
3. 在备份文件列表中选择要恢复的备份文件
4. 点击"恢复"按钮

### 配置自动备份

1. 进入"设置"页面
2. 点击"数据备份与恢复"
3. 在自动备份设置区开启自动备份
4. 设置备份频率和备份路径

## 注意事项

- 合并功能后，原有的自动备份设置和备份文件将自动迁移到新界面
- 自定义备份路径的设置将保持不变
- 建议用户在更新后检查自动备份设置，确保配置正确
